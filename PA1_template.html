<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Jesse Harris" />

<meta name="date" content="2017-03-11" />

<title>Exploring Some Activity Monitoring Data</title>

<script src="PA1_template_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="PA1_template_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="PA1_template_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="PA1_template_files/navigation-1.1/tabsets.js"></script>
<link href="PA1_template_files/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="PA1_template_files/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Exploring Some Activity Monitoring Data</h1>
<h4 class="author"><em>Jesse Harris</em></h4>
<h4 class="date"><em>March 11, 2017</em></h4>

</div>


<div id="loading-and-preprocessing-the-data" class="section level2">
<h2>Loading and preprocessing the data</h2>
<p>Assuming that the activity.csv file exists within the working directory, we can load the data as follows:</p>
<pre class="r"><code>activity &lt;- read.csv(&quot;activity.csv&quot;)</code></pre>
<p>What does the data looks like?</p>
<pre class="r"><code>str(activity)</code></pre>
<pre><code>## &#39;data.frame&#39;:    17568 obs. of  3 variables:
##  $ steps   : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ date    : Factor w/ 61 levels &quot;2012-10-01&quot;,&quot;2012-10-02&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ interval: int  0 5 10 15 20 25 30 35 40 45 ...</code></pre>
<p>Let’s convert the dates from factor to date class.</p>
<pre class="r"><code>activity$date &lt;- as.Date(activity$date, format = &quot;%Y-%m-%d&quot;)</code></pre>
<p>Okay, our data should be ready for analysis.</p>
<pre class="r"><code>str(activity)</code></pre>
<pre><code>## &#39;data.frame&#39;:    17568 obs. of  3 variables:
##  $ steps   : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ date    : Date, format: &quot;2012-10-01&quot; &quot;2012-10-01&quot; ...
##  $ interval: int  0 5 10 15 20 25 30 35 40 45 ...</code></pre>
<p>Looks good. There are some NAs, but we’ll ignore them for now.</p>
</div>
<div id="what-is-the-mean-total-number-of-steps-taken-per-day" class="section level2">
<h2>What is the mean total number of steps taken per day?</h2>
<p>First, let’s calculate the total number of steps taken each day.</p>
<pre class="r"><code>df1 &lt;- aggregate(steps ~ date, data = activity, sum)
head(df1)</code></pre>
<pre><code>##         date steps
## 1 2012-10-02   126
## 2 2012-10-03 11352
## 3 2012-10-04 12116
## 4 2012-10-05 13294
## 5 2012-10-06 15420
## 6 2012-10-07 11015</code></pre>
<p>Next, let’s plot this as a histogram to get a feel for the distribution of the data.</p>
<pre class="r"><code>hist(df1$steps,
     main = &quot;Steps Per Day&quot;,
     xlab = &quot;Steps&quot;,
     ylab = &quot;Number of Days&quot;,
     border = &quot;blue&quot;,
     col = &quot;lightblue&quot;,
     xlim = c(0,25000),
     breaks = 24)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Based on the histogram, it looks like the most common total per day step count is between 10,000 and 11,000. Let’s see what the mean and median values work out to exactly.</p>
<pre class="r"><code>mean(df1$steps)</code></pre>
<pre><code>## [1] 10766.19</code></pre>
<pre class="r"><code>median(df1$steps)</code></pre>
<pre><code>## [1] 10765</code></pre>
</div>
<div id="what-is-the-average-daily-activity-pattern" class="section level2">
<h2>What is the average daily activity pattern?</h2>
<p>First, let’s figure out the average number of steps taken for each time interval across all days.</p>
<pre class="r"><code>df2 &lt;- aggregate(steps ~ interval, data = activity, mean)</code></pre>
<p>To make sure this worked, let’s look at a section of the data, specifically, the average values for 7-8 AM.</p>
<pre class="r"><code>df2[85:97,]</code></pre>
<pre><code>##    interval    steps
## 85      700 43.81132
## 86      705 44.37736
## 87      710 50.50943
## 88      715 54.50943
## 89      720 49.92453
## 90      725 50.98113
## 91      730 55.67925
## 92      735 44.32075
## 93      740 52.26415
## 94      745 69.54717
## 95      750 57.84906
## 96      755 56.15094
## 97      800 73.37736</code></pre>
<p>It seems to look okay. Let’s try making this data into a time series plot using ggplot2.</p>
<pre class="r"><code>library(ggplot2)
p2 &lt;- ggplot(df2, aes(interval, steps)) +
        geom_line()
print(p2)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>So which 5-minute interval contains, on average, the maximum number of steps?</p>
<pre class="r"><code>head(df2[order(df2$steps,decreasing=T),])</code></pre>
<pre><code>##     interval    steps
## 104      835 206.1698
## 105      840 195.9245
## 107      850 183.3962
## 106      845 179.5660
## 103      830 177.3019
## 101      820 171.1509</code></pre>
<p>Looks like it’s the 835 interval, which seems to match what we saw in our time series plot above.</p>
</div>
<div id="imputing-missing-values" class="section level2">
<h2>Imputing missing values</h2>
<p>How many of the rows in the dataset contain NA values?</p>
<pre class="r"><code>totalna &lt;- sum(!(complete.cases(activity)))
totalna</code></pre>
<pre><code>## [1] 2304</code></pre>
<p>So 2304 rows. For interest’s sake, let’s check what percentage of the values that represents.</p>
<pre class="r"><code>totalna/nrow(activity)*100</code></pre>
<pre><code>## [1] 13.11475</code></pre>
<p>13.1 percent. Let’s impute the missing values to see if that will substantially change the results of previous analyses. The method we’ll use is to replace NA values with the mean value, across all days, for that same time interval. The mean value will be taken from the df2 data frame, created earlier, which contains all the intervals and the mean steps value for each.</p>
<pre class="r"><code>activity2 &lt;- activity
activity2$steps[is.na(activity2$steps)] &lt;- df2$steps[match(activity2$interval,
                                                         df2$interval)]</code></pre>
<pre><code>## Warning in activity2$steps[is.na(activity2$steps)] &lt;-
## df2$steps[match(activity2$interval, : number of items to replace is not a
## multiple of replacement length</code></pre>
<p>Despite the warning, the code accomplished what it needed to do. Earlier when we ran str against the activity data frame, the first steps values were all NAs. Let’s check now.</p>
<pre class="r"><code>str(activity2)</code></pre>
<pre><code>## &#39;data.frame&#39;:    17568 obs. of  3 variables:
##  $ steps   : num  1.717 0.3396 0.1321 0.1509 0.0755 ...
##  $ date    : Date, format: &quot;2012-10-01&quot; &quot;2012-10-01&quot; ...
##  $ interval: int  0 5 10 15 20 25 30 35 40 45 ...</code></pre>
<p>It seems the replacement of NA values worked. Let’s double-check to make sure there are no NAs left in the data set.</p>
<pre class="r"><code>sum(!(complete.cases(activity2)))</code></pre>
<pre><code>## [1] 0</code></pre>
<p>Good, none left. Now we’ll generate our histogram again and see if there is any difference. First we’ll again calculate the total number of steps each day.</p>
<pre class="r"><code>df3 &lt;- aggregate(steps ~ date, data = activity2, sum)</code></pre>
<p>Now let’s re-generate our original histogram and plot the new data as a second histogram for comparison.</p>
<pre class="r"><code>par(mfrow=c(1,2))

# Histogram based on original data

hist1 &lt;- hist(df1$steps,
     main = &quot;Steps Per Day with NAs&quot;,
     xlab = &quot;Steps&quot;,
     ylab = &quot;Number of Days&quot;,
     border = &quot;blue&quot;,
     col = &quot;lightblue&quot;,
     xlim = c(0,25000),
     ylim = c(0,20),
     breaks = 24)

# Histogram based on dataset with imputed data

hist(df3$steps,
     main = &quot;Steps Per Day with Imputed Data&quot;,
     xlab = &quot;Steps&quot;,
     ylab = &quot;Number of Days&quot;,
     border = &quot;blue&quot;,
     col = &quot;lightblue&quot;,
     xlim = c(0,25000),
     ylim = c(0,20),
     breaks = 24)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>So not much changed, except the number of days with 10000-11000 steps has increased significantly. Why is that?</p>
<p>Well let’s look at the mean and median values. Here is a comparison of the mean and median for the dataset including NAs, and our new dataset with imputed data.</p>
<pre class="r"><code>a &lt;- mean(df1$steps)
b &lt;- median(df1$steps)
c &lt;- mean(df3$steps)
d &lt;- median(df3$steps)
df4 &lt;- data.frame(c(a,b), c(c,d))
rownames(df4) &lt;- c(&quot;mean&quot;, &quot;median&quot;)
colnames(df4) &lt;- c(&quot;Includes.NAs&quot;, &quot;Imputed.Data&quot;)
df4</code></pre>
<pre><code>##        Includes.NAs Imputed.Data
## mean       10766.19     10766.19
## median     10765.00     10766.19</code></pre>
<p>Wait, how come the mean and median ended up the same when we used imputed data? Well, the original data had eight days with no observations. Every interval for those days was filled with the same imputed data, that is, the mean for each interval, and therefore all those days ended up having the same total number of steps–10766.19 steps, to be exact.</p>
<p>This also explains why the number of days with step counts between 10,000 and 11,000 increased signifantly in our new histogram.</p>
</div>
<div id="are-there-differences-in-activity-patterns-between-weekdays-and-weekends" class="section level2">
<h2>Are there differences in activity patterns between weekdays and weekends?</h2>
<p>Let’s create a new factor variable that identifies whether a particular observation occurred on a weekday or weekend.</p>
<pre class="r"><code>activity2$day &lt;- weekdays(activity2$date)
activity2$day &lt;- gsub(&quot;S(atur|un)day&quot;, &quot;weekend&quot;, activity2$day)
activity2$day &lt;- gsub(&quot;(Mon|Tues|Wednes|Thurs|Fri)day&quot;, &quot;weekday&quot;,
                      activity2$day)</code></pre>
<p>Now let’s aggregate this data to get the average steps per interval on weekdays and weekends.</p>
<pre class="r"><code>df5 &lt;- aggregate(steps ~ interval + day, data = activity2, mean)</code></pre>
<p>Finally, we’ll visualize this data using a time series plot.</p>
<pre class="r"><code>p4 &lt;- ggplot(df5, aes(interval, steps)) +
        geom_line()
p4 + facet_grid(day ~ .)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>So a couple interesting differences are apparent. As might be expected, there seems to be less activity in the early morning on weekends. Also, from mid-morning to afternoon, the subject appears to be more active on weekends than on weekdays.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
